---
phase: 03-export-distribution
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - PSP-Inspektions-Flowchart/Inspektionsablauf.svg
  - PSP-Inspektions-Flowchart/Inspektionsablauf.md
  - PSP-Inspektions-Flowchart/README.md
autonomous: false

must_haves:
  truths:
    - "SVG file renders the flowchart in any browser"
    - "Mermaid source is included as bonus file for tech-savvy customers"
    - "README in German explains how to open and edit all files"
    - "Delivery folder contains all 4 files (drawio, svg, md, README)"
    - "draw.io file is confirmed importable into Visio via draw.io"
  artifacts:
    - path: "PSP-Inspektions-Flowchart/Inspektionsablauf.svg"
      provides: "SVG export for print/web use"
    - path: "PSP-Inspektions-Flowchart/Inspektionsablauf.md"
      provides: "Mermaid source for tech-savvy customers"
    - path: "PSP-Inspektions-Flowchart/README.md"
      provides: "German instructions for opening and editing files"
  key_links:
    - from: "PSP-Inspektions-Flowchart/Inspektionsablauf.drawio"
      to: "PSP-Inspektions-Flowchart/Inspektionsablauf.svg"
      via: "SVG generation from draw.io XML"
    - from: "inspektionen-flowchart.md"
      to: "PSP-Inspektions-Flowchart/Inspektionsablauf.md"
      via: "Copy of Mermaid source"
---

<objective>
Generate SVG export, copy Mermaid source, write German README, and assemble the complete delivery folder. Verify Visio compatibility path.

Purpose: Complete the customer deliverable package with all formats and documentation so customers can immediately use the files.

Output: Complete `PSP-Inspektions-Flowchart/` folder with 4 files ready for customer handover.
</objective>

<execution_context>
@/Users/jean-pierrekoenig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jean-pierrekoenig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-export-distribution/03-01-SUMMARY.md
@.planning/phases/03-export-distribution/03-CONTEXT.md
@inspektionen-flowchart.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate SVG and copy Mermaid source</name>
  <files>
PSP-Inspektions-Flowchart/Inspektionsablauf.svg
PSP-Inspektions-Flowchart/Inspektionsablauf.md
  </files>
  <action>
**SVG generation:**
Generate an SVG version of the flowchart. Claude's discretion on method — options:
1. Use draw.io CLI (`drawio` or `draw.io` command) if available to export the .drawio to SVG
2. Use Mermaid CLI (`mmdc`) if available to render the Mermaid source to SVG
3. If no CLI tools are available, construct an SVG manually that represents the flowchart structure using SVG elements (rect, polygon, text, path, line), matching the improved color palette from the draw.io file

Try option 1 first, then option 2, then option 3. Whichever method is used, the SVG must:
- Contain all 26 nodes with German labels
- Show the flow connections
- Use the improved color palette
- Be viewable in any modern browser
- Be suitable for print (vector, not raster)

**Mermaid source copy:**
Copy `inspektionen-flowchart.md` from project root to `PSP-Inspektions-Flowchart/Inspektionsablauf.md`. This is a straight copy — the Mermaid source is the bonus file for tech-savvy customers.
  </action>
  <verify>
1. `PSP-Inspektions-Flowchart/Inspektionsablauf.svg` exists and starts with `<svg` or `<?xml`
2. SVG file size is reasonable (>5KB for a diagram this complex)
3. `PSP-Inspektions-Flowchart/Inspektionsablauf.md` exists and contains the Mermaid diagram
4. Mermaid source contains `flowchart TD` and all node definitions
  </verify>
  <done>
SVG file exists and represents the flowchart. Mermaid source is copied to delivery folder.
  </done>
</task>

<task type="auto">
  <name>Task 2: Write German README and verify delivery package</name>
  <files>PSP-Inspektions-Flowchart/README.md</files>
  <action>
**Write README in German** at `PSP-Inspektions-Flowchart/README.md`:

Structure:
```
# PSP Inspektions-Flowchart

## Inhalt

Brief description of what this package contains and its purpose (inspection obligations per SN EN 1176-7).

## Dateien

| Datei | Format | Verwendung |
|-------|--------|------------|
| Inspektionsablauf.drawio | draw.io | Editierbares Diagramm — Knoten verschieben, Farben aendern, Text bearbeiten |
| Inspektionsablauf.svg | SVG | Druckversion / Web-Einbettung — nicht editierbar |
| Inspektionsablauf.md | Mermaid | Quellcode des Diagramms — fuer technische Nutzer |
| README.md | Markdown | Diese Anleitung |

## Bearbeitung mit draw.io

Step-by-step instructions:
1. How to open the .drawio file (draw.io desktop app or app.diagrams.net)
2. How to edit nodes (double-click to edit text, drag to move)
3. How to add new nodes (explain that style library ensures consistency)
4. How to change colors
5. How to add company logo (replace the PSP Logo placeholder)
6. How to export to PDF/PNG from draw.io

## Import in Microsoft Visio

Step-by-step instructions:
1. Open Visio
2. File > Open > select the .drawio file (Visio can import draw.io format)
3. Alternative: use draw.io Visio export if direct import doesn't work

## Grundlage

Reference to SN EN 1176-7:2020 and purpose of the diagram.

## Kontakt

Placeholder for PSP contact information.
```

All text in German. Use Swiss German conventions (ss instead of sharp-s where appropriate, though "Massnahme" etc. follow the standard used in the Mermaid source).

**Verify delivery package completeness:**
List all files in `PSP-Inspektions-Flowchart/` and confirm exactly 4 files exist:
- Inspektionsablauf.drawio
- Inspektionsablauf.svg
- Inspektionsablauf.md
- README.md
  </action>
  <verify>
1. `PSP-Inspektions-Flowchart/README.md` exists and is in German
2. README contains sections for draw.io editing and Visio import
3. `ls PSP-Inspektions-Flowchart/` shows exactly 4 files
4. All filenames follow German naming convention
  </verify>
  <done>
German README explains how to open, edit, and export all files. Delivery folder contains all 4 files. Visio import path is documented.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete delivery package at `PSP-Inspektions-Flowchart/` containing:
1. **Inspektionsablauf.drawio** — Native draw.io diagram with 26 nodes, 31 edges, branding area, style library
2. **Inspektionsablauf.svg** — Vector export for print/web
3. **Inspektionsablauf.md** — Mermaid source code
4. **README.md** — German instructions for editing and Visio import
  </what-built>
  <how-to-verify>
1. Open `PSP-Inspektions-Flowchart/Inspektionsablauf.drawio` in draw.io (desktop app or https://app.diagrams.net)
2. Verify all nodes are visible and correctly labeled in German
3. Try dragging a node — connectors should follow
4. Try double-clicking a node — text should be editable
5. Check that footnotes and legend entries are individually selectable
6. Check the PSP Logo branding placeholder in top-right
7. Open `Inspektionsablauf.svg` in a browser — verify it displays the flowchart
8. Read `README.md` — verify instructions are clear and in German
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `PSP-Inspektions-Flowchart/` folder contains exactly 4 files
2. SVG renders in browser
3. README is in German with editing and Visio instructions
4. Human verification confirms draw.io file is editable and correct
</verification>

<success_criteria>
The complete delivery folder is ready for customer handover. draw.io file is verified editable by human. SVG renders correctly. README provides clear German instructions. All requirements EXP-01 through EXP-04 are satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/03-export-distribution/03-02-SUMMARY.md`
</output>
