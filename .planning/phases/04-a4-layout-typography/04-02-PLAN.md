---
phase: 04-a4-layout-typography
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - PSP-Inspektions-Flowchart/Inspektionsablauf.drawio
autonomous: false

must_haves:
  truths:
    - "All text uses Helvetica font consistently"
    - "No text is smaller than 8pt"
    - "Colors have good grayscale contrast for B&W printing"
    - "Edge/arrow lines are 1.5-2pt weight"
    - "Flowchart is readable when printed at 100% scale on A4"
    - "No bold/regular differentiation between decision and process nodes"
  artifacts:
    - path: "PSP-Inspektions-Flowchart/Inspektionsablauf.drawio"
      provides: "Fully styled A4 flowchart with professional typography and print-optimized colors"
      contains: "fontFamily=Helvetica"
  key_links:
    - from: "node style attributes"
      to: "consistent Helvetica font"
      via: "fontFamily property in style string"
      pattern: "fontFamily=Helvetica"
    - from: "edge style attributes"
      to: "1.5-2pt stroke weight"
      via: "strokeWidth property in style string"
      pattern: "strokeWidth=[1-2]"
---

<objective>
Apply professional typography, print-optimized colors, and edge styling to the A4-reformatted flowchart. Then verify the complete result with the user via print preview.

Purpose: The spatial reorganization from Plan 01 gives us the layout. This plan polishes typography and colors for professional print output, ensuring B&W readability and consistent Helvetica styling.
Output: Print-ready Inspektionsablauf.drawio with professional typography and optimized colors.
</objective>

<execution_context>
@/Users/jean-pierrekoenig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jean-pierrekoenig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-a4-layout-typography/04-CONTEXT.md
@.planning/phases/04-a4-layout-typography/04-01-SUMMARY.md
@PSP-Inspektions-Flowchart/Inspektionsablauf.drawio
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply Helvetica typography and print-optimized colors</name>
  <files>PSP-Inspektions-Flowchart/Inspektionsablauf.drawio</files>
  <action>
**Typography changes -- apply to ALL mxCell elements with text:**

Font family: Add fontFamily=Helvetica to every node and edge style string. Replace any existing fontFamily values.

Font size hierarchy:
- Title: fontSize=12 (already set in Plan 01)
- Node text (standard process, decision): fontSize=9
- Small nodes / edge labels: fontSize=8 (minimum per user decision)
- Footnotes text: fontSize=7 (this is an exception -- footnotes can go slightly below 8pt if needed for space, but try 8 first)
- Legend text: fontSize=8
- Footer: fontSize=8

Text weight: Remove fontStyle=1 (bold) from ALL nodes EXCEPT the title. Per user decision, no bold/regular differentiation between decision and process nodes. The diamond shape already distinguishes decisions. Specifically ensure P04 "Geraet sperren" has NO fontStyle=1.

**Color changes for B&W print contrast:**

Replace current colors with B&W-friendly alternatives that maintain color distinction on screen AND grayscale separation in print:

Blue section (new playground path -- N01, N02, D02, N03, N04):
- fillColor=#D6E4F0 (light blue, prints as light gray ~85%)
- strokeColor=#2B579A (dark blue, prints as dark gray ~35%)
- fontColor=#1F3864 (very dark blue, prints nearly black)

Green section (inspections -- E00, E01, E02, E03, E04):
- fillColor=#DFF0D8 (light green, prints as light gray ~88%)
- strokeColor=#3C763D (dark green, prints as medium-dark gray ~45%)
- fontColor=#2D572C (very dark green, prints dark)

Yellow section (post-inspection -- P01, D03, P02, D04, P03, P05, D05, P06, P07, D06):
- fillColor=#FFF3CD (light yellow, prints as very light gray ~95%)
- strokeColor=#856404 (dark gold, prints as medium gray ~50%)
- fontColor=#533F03 (very dark gold, prints dark)

Red section (critical -- P04 only):
- fillColor=#F8D7DA (light red/pink, prints as light gray ~87%)
- strokeColor=#A71D2A (dark red, prints as medium-dark gray ~40%)
- fontColor=#721C24 (very dark red, prints dark)
- NO fontStyle=1 (no bold, per user decision -- same treatment as other nodes)

Gray section (start/end -- START, D01, END):
- fillColor=#E9ECEF (very light gray, prints ~92%)
- strokeColor=#6C757D (medium gray, prints ~55%)
- fontColor=#343A40 (dark gray, prints nearly black)

Footnotes and Legend boxes:
- fillColor=#F8F9FA (near white)
- strokeColor=#DEE2E6 (light gray border)
- fontColor=#495057 (dark gray text)

**Edge styling:**

All edges: add strokeWidth=1.5 to style string (medium weight per user decision of 1.5-2pt).
Edge labels: fontSize=8, fontFamily=Helvetica, fontColor=#495057.
Keep edge colors matching their section (blue edges stay blue-ish, green stay green-ish, etc.) but use the darker stroke colors from above for better print visibility.

Update edge strokeColor values:
- Blue edges (e2, e4, e5, e6, e7, e8, e9): strokeColor=#2B579A
- Green edges (e3, e10, e11, e12, e13, e14, e15): strokeColor=#3C763D
- Yellow edges (e16, e17, e19, e20, e21, e23, e24, e26, e27, e28, e29, e30, e32): strokeColor=#856404
- Red edges (e22, e26): strokeColor=#A71D2A
- Gray/neutral edges (e1, e18, e25, e31): strokeColor=#6C757D
  </action>
  <verify>
Read the modified .drawio file and verify:
1. Every mxCell with a style attribute contains "fontFamily=Helvetica"
2. No node (except title) has fontStyle=1 in its style
3. P04 "Geraet sperren" has NO fontStyle=1
4. All edges contain strokeWidth=1.5 (or strokeWidth=2)
5. Font sizes: no fontSize value less than 7 (footnotes exception) or 8 (everything else)
6. Each color section uses distinct fill colors (check that blue, green, yellow, red, gray fills are all different)
  </verify>
  <done>All text uses Helvetica, font sizes respect 8pt minimum (7pt footnotes exception), colors optimized for B&W contrast, edges at 1.5pt weight, no unauthorized bold styling</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify A4 print layout</name>
  <what-built>Complete A4-formatted flowchart with professional Helvetica typography, print-optimized colors with B&W contrast, and all content fitting on a single DIN A4 portrait page.</what-built>
  <how-to-verify>
1. Open PSP-Inspektions-Flowchart/Inspektionsablauf.drawio in draw.io (https://app.diagrams.net)
2. Check page size shows as A4 portrait (210x297mm) -- File > Page Setup or check the page boundary
3. Verify ALL nodes are visible within the page -- nothing extends beyond the white page area
4. Verify title "Inspektion von Spielplatzgeraeten und Spielplatzboeden nach SN EN 1176/1177:" is at the top
5. Verify footer "v1.1 -- 2026" is at the bottom
6. Verify PSP Logo placeholder is visible in the corner
7. Verify three inspection branches (Sichtkontrolle, Funktionskontrolle, Jahreshauptinspektion) are three separate boxes
8. Verify footnotes (9 entries) and legend are both visible at the bottom
9. Print preview (Ctrl/Cmd+P or File > Print): confirm everything fits on one page at 100% scale
10. Check readability: can you read all node text, edge labels, and footnotes?
11. Optional: print to PDF in grayscale/B&W mode and verify the four color sections are distinguishable
  </how-to-verify>
  <resume-signal>Type "approved" if the layout looks good, or describe what needs adjustment (e.g., "text too small in footnotes", "nodes overlap near bottom", "edge labels unreadable")</resume-signal>
</task>

</tasks>

<verification>
1. Typography: Helvetica throughout, 8pt minimum (7pt footnotes allowed), no unauthorized bold
2. Colors: distinct fills for 5 sections, good grayscale contrast
3. Edges: 1.5pt stroke weight, section-appropriate colors
4. Print test: single A4 page, all content visible, readable at 100% scale
</verification>

<success_criteria>
- User confirms flowchart prints cleanly on single A4 page
- All text is Helvetica
- Colors work in both color and B&W print
- Edge weights are professional (1.5-2pt)
- No bold differentiation between node types (per user decision)
</success_criteria>

<output>
After completion, create `.planning/phases/04-a4-layout-typography/04-02-SUMMARY.md`
</output>
