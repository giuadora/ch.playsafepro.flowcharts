---
phase: 04-a4-layout-typography
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - PSP-Inspektions-Flowchart/Inspektionsablauf.drawio
autonomous: true

must_haves:
  truths:
    - "draw.io page is set to DIN A4 portrait dimensions (210x297mm)"
    - "All ~30 flowchart nodes fit within the A4 page area with print margins"
    - "Title, footnotes, legend, logo placeholder, and footer are all present on the single page"
    - "Three inspection types remain as three separate boxes"
    - "No content is clipped or overflows the page boundary"
  artifacts:
    - path: "PSP-Inspektions-Flowchart/Inspektionsablauf.drawio"
      provides: "A4-reformatted flowchart with repositioned nodes"
      contains: "pageWidth=\"794\" pageHeight=\"1123\""
  key_links:
    - from: "all edge source/target attributes"
      to: "repositioned node IDs"
      via: "mxCell source/target references"
      pattern: "source=\"[A-Z0-9]+\" target=\"[A-Z0-9]+\""
---

<objective>
Reformat the existing draw.io flowchart to fit on a single DIN A4 portrait page. This plan handles page setup and complete spatial reorganization -- repositioning and resizing every node to fit within A4 boundaries while preserving all content and flow logic.

Purpose: The current diagram is 1400x2800px -- far too large for A4. This plan compresses the layout to 210x297mm while keeping the flowchart readable and all elements visible.
Output: Updated Inspektionsablauf.drawio with A4 page dimensions and all nodes repositioned within the page.
</objective>

<execution_context>
@/Users/jean-pierrekoenig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jean-pierrekoenig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-a4-layout-typography/04-CONTEXT.md
@PSP-Inspektions-Flowchart/Inspektionsablauf.drawio
</context>

<tasks>

<task type="auto">
  <name>Task 1: Set A4 page dimensions and add title/footer</name>
  <files>PSP-Inspektions-Flowchart/Inspektionsablauf.drawio</files>
  <action>
Modify the mxGraphModel element to set A4 portrait dimensions:
- pageWidth="794" pageHeight="1123" (210mm x 297mm at 96 DPI, which is what draw.io uses)
- dx and dy: adjust to reasonable viewport values (e.g., dx="794" dy="1123")

Add a title text element at the top of the page:
- Text: "Inspektion von Spielplatzgeraeten und Spielplatzboeden nach SN EN 1176/1177:"
- Position: centered at top of page, within margins
- Style: fontSize=12, fontStyle=1 (bold), fontFamily=Helvetica, fontColor=#333333
- This is a standalone text label (mxCell with no shape, just text)

Add a footer text element at the bottom:
- Text: "v1.1 -- 2026"
- Position: bottom-right, small text (fontSize=8)
- Style: fontFamily=Helvetica, fontColor=#999999

Keep the PSP Logo placeholder (id="brand") but reposition to top-right corner within A4 margins. Resize to approximately 100x40 to save space.

Print margins: use 10mm (~38px) on all sides. This means usable area is approximately 190x277mm (718x1047px), starting at x=38, y=38.
  </action>
  <verify>
Read the modified .drawio file and confirm:
1. pageWidth="794" and pageHeight="1123" are set in mxGraphModel
2. A title mxCell exists with the exact text "Inspektion von Spielplatzgeraeten und Spielplatzboeden nach SN EN 1176/1177:"
3. A footer mxCell exists with "v1.1" text
4. Brand/logo placeholder is repositioned within x=38..756, y=38..1085
  </verify>
  <done>Page is A4 portrait (794x1123), title and footer present, logo placeholder repositioned within margins</done>
</task>

<task type="auto">
  <name>Task 2: Reposition and resize all flowchart nodes for A4</name>
  <files>PSP-Inspektions-Flowchart/Inspektionsablauf.drawio</files>
  <action>
Reposition ALL nodes to fit within the A4 usable area (x: 38-756, y: 38-1085). The current layout spans 1400x2800px and must compress to ~718x1047px usable area (accounting for title at top ~30px and footer at bottom ~20px, plus footnotes/legend at bottom ~100px).

Available flowchart area: approximately x=38..756, y=70..960 (below title, above footnotes).
Footnotes+Legend area: approximately y=965..1075.

**Layout strategy -- compact vertical with side branches:**

Compression ratios: horizontal ~0.5x, vertical ~0.35x from current positions. But do NOT just scale -- manually arrange for optimal readability at the smaller size.

Node sizing guidelines (per user decision: minimum 8pt text must be readable):
- Standard process nodes: ~120x45
- Decision diamonds: ~110x65
- Start/End rounded nodes: ~120x35
- Document parallelograms: ~120x40
- Small side nodes (N03, P03, P04): ~100x40

Spatial arrangement (top to bottom, fitting within ~890px vertical):
1. START node: centered, near top (~y=70)
2. D01 decision: below START (~y=115)
3. New playground path (N01-N04): LEFT column (x~50-200), y=180..430
4. E00 "Inspektionszyklus beginnen": center (~y=450)
5. Three inspection branches (E01, E02, E03): spread horizontally at ~y=500, evenly across page width
6. E04 "Inspektionsbericht": center, below branches (~y=560)
7. Post-inspection linear chain (P01, D03, P02, D04): center column, y=600..780
8. Severity branches: P03 right side, P04 left side (~y=760)
9. Continue chain (P05, D05, P06, P07, D06): center, y=800..940
10. END node: center, ~y=950

The three inspection types (Sichtkontrolle, Funktionskontrolle, Jahreshauptinspektion) MUST remain as three separate boxes per user decision.

"Geraet sperren" (P04): same visual treatment as other nodes -- no extra emphasis per user decision. Remove fontStyle=1 (bold) if present.

After repositioning nodes, update ALL edge routing points (mxPoint coordinates in Array/points) to match new node positions. Remove explicit waypoint arrays where possible and let orthogonalEdgeStyle auto-route -- this works better at smaller scale. Keep explicit waypoints only for the complex routing (e.g., the loop-back edges e8 and e32, and the "Bestehender Spielplatz" long route e3).

Footnotes area: reposition to bottom of page, full width (~x=38, y=970, width=350, height=90). Reduce to compact layout.
Legend area: reposition next to footnotes (~x=400, y=970, width=340, height=90).
  </action>
  <verify>
Read the modified .drawio file and verify:
1. All node mxGeometry x values are within 38-756
2. All node mxGeometry y values are within 38-1085
3. No two nodes overlap (check that bounding boxes don't intersect for nodes that shouldn't overlap)
4. Three inspection branch nodes (E01, E02, E03) exist as separate elements
5. FOOTNOTES and LEGEND elements are positioned in the bottom region
6. All edges still reference valid source and target IDs
7. Count of nodes matches original (~30 nodes + footnotes + legend + brand + title + footer)
  </verify>
  <done>All flowchart nodes repositioned within A4 boundaries, edges updated, no clipping, no overlaps, three inspection types preserved as separate boxes</done>
</task>

</tasks>

<verification>
1. Open the .drawio file in draw.io (app.diagrams.net) -- page should show as A4 portrait
2. All nodes visible within the single page
3. No content extends beyond page boundaries
4. Edge connections still link the correct nodes
5. Title at top, footer at bottom, logo placeholder in corner
</verification>

<success_criteria>
- draw.io file has pageWidth=794, pageHeight=1123
- All ~30 nodes plus footnotes/legend fit within A4 with 10mm margins
- Three inspection branches remain separate
- Title, footer, and logo placeholder present
- All edges reference valid node IDs
</success_criteria>

<output>
After completion, create `.planning/phases/04-a4-layout-typography/04-01-SUMMARY.md`
</output>
