---
phase: 01-content-logic
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - flowchart-content.md
autonomous: false

must_haves:
  truths:
    - "Two entry paths (Neuer Spielplatz, Bestehender Spielplatz) are defined from a single starting fork"
    - "New playground path covers Installation through Bauabnahme (SIA 118) then Inspektion nach Installation, with defects routed back to builder before opening"
    - "Existing playground path shows three parallel inspection branches (visuell, operativ, Hauptinspektion) that merge into a shared documentation flow"
    - "Post-inspection process includes documentation, archiving, defect classification (Konform/Empfohlen/Wichtig/Dringend per CEN/TR 17207), safety-critical lockout, Massnahmenkatalog, decision flow, and cycle closure"
    - "All norm references (SN EN 1176-7 clauses, SIA 118, Art. 58 OR, CEN/TR 17207) appear as numbered footnotes, not inline"
    - "A legend explains what each node shape represents"
  artifacts:
    - path: "flowchart-content.md"
      provides: "Complete flowchart structure as structured text"
      contains: "Neuer Spielplatz"
    - path: "flowchart-content.md"
      provides: "Footnote list with norm references"
      contains: "SN EN 1176-7"
    - path: "flowchart-content.md"
      provides: "Shape legend"
      contains: "Legende"
  key_links:
    - from: "New playground path"
      to: "Existing playground inspection cycle"
      via: "Spielplatz eroeffnen node transitions into inspection cycle"
      pattern: "eroeffnen|Bestehender"
    - from: "Three inspection branches"
      to: "Documentation flow"
      via: "All branches merge into Dokumentation"
      pattern: "Dokumentation"
    - from: "Defect classification"
      to: "Dringend severity"
      via: "Dringend triggers Geraet sperren"
      pattern: "Dringend.*sperren|sperren.*Dringend"
    - from: "Post-inspection flow"
      to: "Cycle closure"
      via: "End node with periodicity note"
      pattern: "Inspektionszyklus"
---

<objective>
Create the complete flowchart content and logic structure as a single structured text file covering both playground paths (new and existing), all inspection types, post-inspection defect processing with CEN/TR 17207 severity classification, numbered norm footnotes, and a shape legend.

Purpose: This file is the authoritative content definition that Phase 2 will translate directly into Mermaid syntax. Every node, edge, decision point, and footnote must be defined here so the Mermaid implementation requires zero domain knowledge.

Output: `flowchart-content.md` -- a single Markdown file with structured node definitions, edge connections, footnotes, and legend.
</objective>

<execution_context>
@/Users/jean-pierrekoenig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jean-pierrekoenig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/01-content-logic/01-CONTEXT.md
@existing-playground-flowchart.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create complete flowchart structure</name>
  <files>flowchart-content.md</files>
  <action>
Create `flowchart-content.md` as a structured Markdown file defining the entire flowchart. Use node IDs (e.g., `N01`, `E01`, `D01`) for traceability between this file and the future Mermaid implementation.

The file must contain these sections in order:

**1. Header** -- Title, norm basis, brief description of the flowchart purpose.

**2. Node Definitions** -- Every node listed with:
- ID (unique, prefixed by section: N=new path, E=existing/inspection, P=post-inspection, D=decision)
- Label text (German, action + brief context per locked decision)
- Shape (rectangle=process, diamond=decision, rounded-rect=start/end, parallelogram=document)
- Footnote reference number (if applicable, only where a norm clause prescribes the action)

**3. Starting Fork:**
- Entry node: "Spielplatz-Inspektionen" or similar
- Decision: "Neuer oder bestehender Spielplatz?"
- Two branches

**4. Neuer Spielplatz Path (starts at installation, NOT earlier planning):**
Per locked decisions and requirements NEW-01 through NEW-06:
- Note: The user locked "starts at installation" but requirements list NEW-01 (Planung) and NEW-02 (Bau). The CONTEXT.md locked decision says "New playground path starts at installation (not earlier planning/procurement steps)." Honor the locked decision: START the new path at Bauabnahme or at the point where the physical playground is ready. However, re-reading carefully: the requirements say Planung and Bau nodes exist. The CONTEXT decision overrides: "starts at installation." Interpret this as: the flowchart's new playground path begins AFTER the playground is physically built. Include a note that Planung and Bau are assumed complete. The first actionable node is Bauabnahme (SIA 118), followed by Inspektion nach Installation.
- Bauabnahme nach SIA 118 (contractual construction acceptance) -- with footnote
- Inspektion nach Installation (SN EN 1176-7, 6.1 a) -- with footnote. Label should include brief scope: safety inspection of all installed equipment by certified specialist.
- Decision: "Maengel festgestellt?" (defects found at installation inspection)
- If yes: "Maengel an Ersteller/Hersteller zurueck" -- defects go back to builder/manufacturer for correction. Then re-inspect (loop back to Inspektion nach Installation).
- If no (or defects resolved): "Spielplatz eroeffnen" -- transitions into Bestehender Spielplatz path.

**5. Bestehender Spielplatz Path -- Three Parallel Inspection Branches:**
Per requirements INSP-01 through INSP-05 and locked decisions:
- Represent three inspection types as PARALLEL branches (Claude's discretion on fork/join vs subgraph -- use a clear fork-join pattern with a common entry point and merge point).
- Each inspection node label includes frequency + scope per locked decision:
  a) Visuelle Routineinspektion (1-3x/Woche): Sichtpruefung auf offensichtliche Gefahren -- footnote SN EN 1176-7, 6.1 b
  b) Operative Inspektion (alle 1-3 Monate): Funktionspruefung, Verschleiss, Stabilitaet -- footnote SN EN 1176-7, 6.1 c
  c) Jaehrliche Hauptinspektion: Umfassende Pruefung durch zertifizierte, unabhaengige Fachperson -- footnote SN EN 1176-7, 6.1 d
- All three merge into a single "Inspektionsbericht erstellen" node.
- Note: Per CONTEXT specifics, defects can be found on ALL inspection types. The classification by the inspector determines follow-up, not the inspection type.

**6. Post-Inspection Process:**
Per requirements POST-01 through POST-08, locked decisions on defect severity:
- Dokumentation: Inspektionsbericht erstellen (POST-01)
- Bericht archivieren (POST-02)
- Decision: "Maengel festgestellt?" (POST-03)
  - If no defects: skip to cycle closure
  - If defects found: classify per CEN/TR 17207 risk assessment
- Defect classification (multi-path decision per locked decision):
  - Konform: Keine Massnahme, nur Dokumentation
  - Empfohlen: feeds into Massnahmenkatalog
  - Wichtig: feeds into Massnahmenkatalog
  - Dringend: triggers "Geraet sperren" IMMEDIATELY (POST-04), THEN feeds into Massnahmenkatalog
- Massnahmenkatalog erstellen (POST-05): prioritize, assign, schedule
- Entscheidung (POST-06): Budget, intern vs. extern, Priorisierung
- Massnahmen umsetzen (execute repairs/corrections)
- Dokumentation bestehender Maengel (POST-07): tracking, follow-up verification
- Unresolved defects: loop back with re-check at next inspection per locked decision (no escalation path)
- Cycle closure (POST-08): End node "Naechster Inspektionszyklus gemaess Zeitplan" -- per locked decision, this is an end node with periodicity note, NOT an explicit loop arrow.

**7. Edge Definitions** -- Every connection between nodes, listed as:
- From (node ID) --> To (node ID)
- Label on edge (if any, e.g., "Ja", "Nein", "Dringend")

**8. Footnotes** -- Numbered list:
- Only where a specific norm clause prescribes the action (per locked decision)
- Format: "[N] SN EN 1176-7:2020, X.X -- key obligation in German"
- Include: SN EN 1176-7 clauses (6.1a, 6.1b, 6.1c, 6.1d, 6.2.1, 8.2), SIA 118, Art. 58 OR, CEN/TR 17207 reference
- Art. 58 OR appears as a footnote only (per locked decision), attached to a general note or the starting node.

**9. Shape Legend:**
Per locked decision, include a legend explaining:
- Rectangle: Prozessschritt / Aktion
- Diamond: Entscheidungspunkt
- Rounded rectangle: Start / Ende / Uebergang
- Parallelogram (if used): Dokument / Bericht
- Any color coding intended (for Phase 2 styling)

**Important constraints:**
- All text in German using correct SN EN 1176 terminology
- Language accessible to facility managers and municipal administrators (per locked decision)
- Use official norm terms (Hauptinspektion, Bauabnahme, etc.) with footnotes explaining meaning where helpful
- No PSP branding or service references
- No responsible parties on nodes (per locked decision) -- actions only
- Reference `existing-playground-flowchart.md` for tone and terminology examples, but do NOT copy its structure (that file uses a sequential inspection model and "5 pillars" framing which differs from the parallel model and CEN/TR 17207 severity classification required here)
  </action>
  <verify>
Read the created file and confirm:
1. Starting fork exists with "Neuer" and "Bestehender" branches
2. New playground path has Bauabnahme, Inspektion nach Installation, defect decision, builder loop, and opening transition
3. Three inspection types are defined as parallel branches with frequency + scope
4. Post-inspection flow has all 8 POST requirements covered
5. Defect severity uses exactly 4 levels: Konform, Empfohlen, Wichtig, Dringend
6. Dringend explicitly triggers "Geraet sperren"
7. Cycle ends with periodicity note, not a loop arrow
8. Footnote section exists with numbered entries
9. Legend section exists
10. No inline norm references (all in footnotes)
11. Count nodes: should be roughly 20-30 nodes total
  </verify>
  <done>
`flowchart-content.md` exists with: (a) complete node definitions with IDs and German labels, (b) both playground paths fully defined, (c) three parallel inspection branches, (d) four-level CEN/TR 17207 defect severity routing, (e) numbered footnotes for all applicable norm references, (f) shape legend. Every requirement from FLOW-01 through POST-08 is covered.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify flowchart content accuracy</name>
  <what-built>Complete flowchart content structure in `flowchart-content.md` covering both playground paths, inspection types, post-inspection defect processing with CEN/TR 17207 severity levels, norm footnotes, and shape legend. This is the authoritative content that Phase 2 will translate to Mermaid.</what-built>
  <how-to-verify>
1. Open `flowchart-content.md` in the project root
2. Verify the starting fork correctly splits into Neuer/Bestehender paths
3. Verify the new playground path starts at Bauabnahme (not earlier planning steps) and includes Inspektion nach Installation
4. Verify three inspection types are parallel with correct frequencies (visuell 1-3x/Woche, operativ 1-3 Monate, Hauptinspektion jaehrlich)
5. Verify defect classification uses exactly: Konform, Empfohlen, Wichtig, Dringend
6. Verify "Dringend" triggers immediate "Geraet sperren"
7. Verify cycle ends with periodicity note (not a loop arrow)
8. Verify footnotes reference the correct norm clauses
9. Verify no PSP branding, no responsible parties on nodes
10. Confirm the content is complete enough for Phase 2 Mermaid translation without domain expertise
  </how-to-verify>
  <resume-signal>Type "approved" to proceed to Phase 2, or describe any content issues to fix</resume-signal>
</task>

</tasks>

<verification>
Requirements coverage check against REQUIREMENTS.md:

- FLOW-01: Starting fork splits into Neuer/Bestehender -- check node definitions
- FLOW-02: New path transitions to existing path via "Spielplatz eroeffnen" -- check edge definitions
- FLOW-03: Existing path cycles back via "Naechster Inspektionszyklus" end node -- check cycle closure
- FLOW-04: All norm refs as numbered footnotes -- check footnote section
- NEW-01 through NEW-06: New playground path nodes -- check section 4
- INSP-01 through INSP-05: Parallel inspection branches -- check section 5
- POST-01 through POST-08: Post-inspection flow -- check section 6
</verification>

<success_criteria>
1. Single file `flowchart-content.md` exists in project root
2. Every requirement FLOW-01 through POST-08 (22 requirements) is traceable to at least one node or edge
3. Defect severity follows CEN/TR 17207 exactly (4 levels)
4. Footnotes cover: SN EN 1176-7 (6.1a, 6.1b, 6.1c, 6.1d, 6.2.1), SIA 118, Art. 58 OR, CEN/TR 17207
5. User confirms content accuracy via checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/01-content-logic/01-01-SUMMARY.md`
</output>
