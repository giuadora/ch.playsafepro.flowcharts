---
phase: 08-node-modifications-norm-compliance
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Inspektion-von-Spielplatzgeraeten-und-Spielplatzboeden/Neuer-Spielplatz.drawio
autonomous: true

must_haves:
  truths:
    - "FC1 'Inspektion nach Installation' node is colored green (inspection activity)"
    - "FC1 'Inspektionsplan erstellen' displays as subprocess symbol (double-bordered rectangle)"
    - "FC1 'Inspektionsplan erstellen' carries a footnote superscript referencing SN EN 1176-7 6.2.4"
    - "FC1 footnote box contains only footnotes relevant to FC1 nodes (1, 2, plus new Inspektionsplan footnote)"
  artifacts:
    - path: "Inspektion-von-Spielplatzgeraeten-und-Spielplatzboeden/Neuer-Spielplatz.drawio"
      provides: "FC1 with green installation inspection, subprocess Inspektionsplan, audited footnotes"
      contains: "shape=process"
  key_links:
    - from: "N02 node style"
      to: "green color scheme"
      via: "fillColor=#DFF0D8;strokeColor=#3C763D;fontColor=#2D572C"
      pattern: "fillColor=#DFF0D8"
    - from: "IPLAN node style"
      to: "subprocess shape"
      via: "shape=process in draw.io style"
      pattern: "shape=process"
    - from: "IPLAN node value"
      to: "footnote superscript"
      via: "superscript number in node text"
      pattern: "Inspektionsplan erstellen"
---

<objective>
Apply node modifications to FC1 (Neuer-Spielplatz.drawio): color the installation inspection node green, render Inspektionsplan as subprocess symbol, audit footnote coverage, and ensure the footnote box is complete and accurate.

Purpose: Fulfill NODE-01, NODE-02, REF-01 (FC1 portion), REF-02, and REF-03 (FC1 portion) requirements for norm-compliant node presentation in the new playground commissioning flowchart.
Output: Updated Neuer-Spielplatz.drawio with all FC1 node modifications applied.
</objective>

<execution_context>
@/Users/jean-pierrekoenig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jean-pierrekoenig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-flowchart-split-file-structure/07-01-SUMMARY.md
@Inspektion-von-Spielplatzgeraeten-und-Spielplatzboeden/Neuer-Spielplatz.drawio
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply FC1 node modifications and footnote audit</name>
  <files>Inspektion-von-Spielplatzgeraeten-und-Spielplatzboeden/Neuer-Spielplatz.drawio</files>
  <action>
Make three targeted XML edits to Neuer-Spielplatz.drawio:

**Edit 1 — NODE-01: Color N02 node green (inspection activity)**

Change the N02 mxCell style from blue to green. The current style is:
```
rounded=0;whiteSpace=wrap;html=1;fillColor=#D6E4F0;strokeColor=#2B579A;fontColor=#1F3864;fontSize=9;fontFamily=Helvetica;align=center;
```
Replace with green inspection colors:
```
rounded=0;whiteSpace=wrap;html=1;fillColor=#DFF0D8;strokeColor=#3C763D;fontColor=#2D572C;fontSize=9;fontFamily=Helvetica;align=center;
```
These are the same green colors used by E00 and the inspection nodes in FC2 (DFF0D8/3C763D/2D572C).

**Edit 2 — NODE-02: Render IPLAN as subprocess symbol**

Change the IPLAN mxCell style from plain rectangle to subprocess (predefined process). The current style is:
```
rounded=0;whiteSpace=wrap;html=1;fillColor=#D6E4F0;strokeColor=#2B579A;fontColor=#1F3864;fontSize=9;fontFamily=Helvetica;align=center;
```
Replace with subprocess shape:
```
shape=process;whiteSpace=wrap;html=1;fillColor=#D6E4F0;strokeColor=#2B579A;fontColor=#1F3864;fontSize=9;fontFamily=Helvetica;align=center;
```
The key change is replacing `rounded=0` with `shape=process`. This is the same pattern used for the IHM node in the original Spielplatzinspektionen.drawio and in FC2. In draw.io, `shape=process` renders as a double-bordered rectangle (the standard flowchart subprocess/predefined process symbol).

**Edit 3 — REF-02 + REF-01 + REF-03: Add Inspektionsplan footnote**

The "Inspektionsplan erstellen" node references SN EN 1176-7, 6.2.4 (the norm clause requiring an inspection plan). This is currently footnote 8 in FC2. Since FC1 uses footnotes 1-2, add this as footnote 3 in FC1.

a) Update the IPLAN node value to include a superscript:
  - Current: `Inspektionsplan erstellen`
  - New: `Inspektionsplan erstellen³`

  Note: The superscript 3 is the Unicode character ³ (U+00B3), matching the superscript style used throughout the project (e.g., ¹ ² in existing FC1 nodes).

b) Update the FOOTNOTES mxCell value to add the new footnote:
  - Current value ends with: `² SN EN 1176-7, 6.1a — Inspektion nach Installation`
  - Add after it: `&lt;br&gt;³ SN EN 1176-7, 6.2.4 — Inspektionsplan`

  The full new FOOTNOTES value should be:
  ```
  &lt;b&gt;Fussnoten&lt;/b&gt;&lt;br&gt;¹ SIA 118 — Vertragliche Bauabnahme, ersetzt nicht die Sicherheitsinspektion&lt;br&gt;² SN EN 1176-7, 6.1a — Inspektion nach Installation&lt;br&gt;³ SN EN 1176-7, 6.2.4 — Inspektionsplan
  ```

c) Increase the FOOTNOTES box height from 55 to 65 to accommodate the third line. Change the mxGeometry height attribute for the FOOTNOTES cell.

**Footnote audit for FC1 (REF-01 verification):**
Verify every FC1 node that references a norm clause has a superscript:
- N01 "Bauabnahme nach SIA 118¹" — has ¹ (SIA 118). CORRECT.
- N02 "Inspektion nach Installation²" — has ² (SN EN 1176-7 6.1a). CORRECT.
- D02 "Mängel festgestellt?" — no norm reference. CORRECT (decision node, no norm clause).
- N03 "Mängel an Ersteller/Hersteller" — no norm reference. CORRECT (procedural step, no specific norm clause).
- N04 "Spielplatz eröffnen" — no norm reference. CORRECT (action step).
- IPLAN "Inspektionsplan erstellen" — needs ³ (SN EN 1176-7 6.2.4). ADDING in Edit 3.
- START, E00 — no norm references. CORRECT (start/end nodes).

All nodes properly audited. No missing footnotes after Edit 3.
  </action>
  <verify>
1. Open Neuer-Spielplatz.drawio in a text editor and verify:
   - N02 style contains `fillColor=#DFF0D8;strokeColor=#3C763D;fontColor=#2D572C`
   - IPLAN style starts with `shape=process;`
   - IPLAN value contains `³` superscript
   - FOOTNOTES value contains the ³ footnote line about Inspektionsplan
   - FOOTNOTES height is 65

2. Validate XML is well-formed: `python3 -c "import xml.etree.ElementTree as ET; ET.parse('Inspektion-von-Spielplatzgeraeten-und-Spielplatzboeden/Neuer-Spielplatz.drawio'); print('Valid XML')"` should print "Valid XML"
  </verify>
  <done>
- N02 "Inspektion nach Installation" is green (DFF0D8/3C763D/2D572C color scheme)
- IPLAN "Inspektionsplan erstellen" uses shape=process (double-bordered rectangle)
- IPLAN carries superscript ³ referencing SN EN 1176-7 6.2.4
- FOOTNOTES box contains three entries (¹ SIA 118, ² 6.1a, ³ 6.2.4) with adequate height
- All FC1 nodes referencing norm clauses have footnote superscripts (complete audit)
  </done>
</task>

</tasks>

<verification>
1. XML well-formedness: Parse the file with Python XML parser — must succeed without errors
2. Node color check: grep for N02's fillColor — must be #DFF0D8
3. Subprocess shape check: grep for IPLAN's shape — must be "shape=process"
4. Footnote completeness: grep for superscript ³ in IPLAN value and in FOOTNOTES value
5. No broken edges: all edge source/target IDs still match existing node IDs
</verification>

<success_criteria>
- FC1 "Inspektion nach Installation" node visually renders in green (matching inspection activity color)
- FC1 "Inspektionsplan erstellen" renders as double-bordered rectangle (subprocess symbol)
- FC1 footnote box has 3 entries covering all norm-referenced nodes
- File is valid draw.io XML that opens without errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-node-modifications-norm-compliance/08-01-SUMMARY.md`
</output>
